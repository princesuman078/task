<html>
<head>
  <title>File Table</title>
  <style>
    /* Add some styling for the table */
    table {
      border-collapse: collapse;
      width: 100%;
    }
    td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
    }
    tr:nth-child(even) {
      background-color: #dddddd;
    }
  </style>
</head>
<body>
  <!-- Add a file input element that allows the user to select a folder -->
  <input type="file" id="folderInput" webkitdirectory directory multiple />
  <!-- Add a table element to display the file information -->
  <table id="fileTable">
    <tr>
      <th>File name</th>
      <th>File size</th>
      <th>Action</th>
    </tr>
  </table>
  <!-- Add a script tag to contain the JavaScript code -->
  <script>
    // Get the input element and the table element
    const input = document.getElementById('folderInput');
    const table = document.getElementById('fileTable');
    // Add an event listener for the change event of the input element
    input.addEventListener('change', (event) => {
      // Get the files that were selected
      const files = event.target.files;

      var i=0
      let aar=[];
      for(const file of files){
        aar.push(file.name);
      }
      function sortByExt(files) {
    let arr = [];
    for (let x of files) { 
        let a =  x.split(/[\.]/g).filter(i => i.length > 0); 
        let b = '';
        if (a.length >= 2 && !x.endsWith('.'))
            b = a[a.length - 1];
    arr.push([b, x.replace(b, '')]);
    }
    return arr.sort().map(x => x[1].concat(x[0]));
}
        let data=sortByExt(aar);

     
      console.log(data)
      // Iterate through the files and add a row to the table for each file
      for(const da of data){
      for (const file of files) {
        if(file.name==da){
        // Create a new row element
        const row = document.createElement('tr');
        // Create a cell for the file name
        const nameCell = document.createElement('td');
        nameCell.innerText = file.name.split(".")[0]; // remove the file extension
        // Create a cell for the file size
        const sizeCell = document.createElement('td');
        var fileSize = file.size;
  let sizeUnit = 'bytes';
  if (fileSize >= 1024 && fileSize < 1048576) {
    fileSize /= 1024;
    sizeUnit = 'KB';
  } else if (fileSize >= 1048576 && fileSize < 1073741824) {
    fileSize /= 1048576;
    sizeUnit = 'MB';
  } else if (fileSize >= 1073741824 && fileSize < 1099511627776) {
    fileSize /= 1073741824;
    sizeUnit = 'GB';
  } else if (fileSize >= 1099511627776) {
    fileSize /= 1099511627776;
    sizeUnit = 'TB';
  }
        sizeCell.innerText = `${fileSize} ${sizeUnit}`;
        
        // Create a cell for the action button
        const actionCell = document.createElement('td');
        // Create the action button
        const actionButton = document.createElement('button');
        actionButton.innerText = 'Info';
        // Add an event listener for the click event of the button
        actionButton.addEventListener('click', () => {
          // Show some more information about the file when the button is clicked
          alert(`File name: ${file.name}\nFile size: ${file.size} bytes`);
        });
        // Add the button to the action cell
        actionCell.appendChild(actionButton);
        // Add the cells to the row
        row.appendChild(nameCell);
        console.log(nameCell);
        row.appendChild(sizeCell);
        console.log(sizeCell);
        row.appendChild(actionCell);
        console.log(actionCell);

        // Add the row to the table
        table.appendChild(row);
        }
      }
    }
    });
  </script>
</body>
</html>
